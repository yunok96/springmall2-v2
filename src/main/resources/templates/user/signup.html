<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>회원가입</title>
    <!-- Bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
</head>
<body class="d-flex flex-column min-vh-100">
<!-- Navbar -->
<nav th:replace="~{fragments/navbar :: navbar}"></nav>

<main class="container mt-5 flex-grow-1">
    <div class="container mt-5">
        <h2>회원가입</h2>
        <form id="signup" action="/userRegister" method="POST">
            <!-- 이메일 -->
            <div class="mb-3">
                <label for="email" class="form-label">이메일</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="이메일을 입력하세요" required th:value="${email}">
                <div id="duplicatedEmailError" class="invalid-feedback">
                    이미 사용 중인 이메일입니다.
                </div>
            </div>

            <!-- 인라인 에러 메시지 영역 -->
            <div id="errorBox" style="color: red; margin-top: 10px;"></div>

            <!-- 비밀번호 -->
            <div class="mb-3">
                <label for="password" class="form-label">비밀번호</label>
                <input type="password" class="form-control" id="password" name="password" placeholder="비밀번호를 입력하세요" required>
            </div>

            <!-- 비밀번호 확인 -->
            <div class="mb-3">
                <label for="confirmPassword" class="form-label">비밀번호 확인</label>
                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="비밀번호를 다시 입력하세요" required>
                <div id="passwordError" class="invalid-feedback">
                    비밀번호가 일치하지 않습니다.
                </div>
            </div>

            <!-- 이름 -->
            <div class="mb-3">
                <label for="nickname" class="form-label">이름</label>
                <input type="text" class="form-control" id="nickname" name="nickname" placeholder="이름을 입력하세요" required th:value="${nickname}">
            </div>

            <!-- 역할 선택 (라디오 버튼) -->
            <div class="mb-3">
                <label class="form-label">가입 유형</label>
                <div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role" id="buyer" value="ROLE_BUYER" required checked>
                        <label class="form-check-label" for="buyer">구매자</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role" id="seller" value="ROLE_SELLER" required>
                        <label class="form-check-label" for="seller">판매자</label>
                    </div>
                </div>
            </div>

            <!-- 가입 버튼 -->
            <button type="submit" class="btn btn-primary">가입하기</button>
        </form>

        <div class="mt-3">
            <a href="/login">이미 계정이 있나요? 로그인</a>
        </div>
    </div>
</main>

<!-- Footer -->
<footer th:replace="~{fragments/footer :: footer}"></footer>

<!-- Bootstrap js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
<script th:src="@{/js/user/signup.js}"></script>
</body>
</html>